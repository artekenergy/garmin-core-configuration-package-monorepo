var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,o=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&r(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&r(e,n,t[n]);return e},c=(e,a)=>t(e,n(a));import{l,k as d,G as u}from"./vendor-CJMu0MV0.js";import{d as h,u as p,a as m,b as g,A as f,y as v}from"./signals-0dQTJ-mX.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var y=0;function _(e,t,n,a,i,s){t||(t={});var r,o,c=t;if("ref"in c)for(o in c={},t)"ref"==o?r=t[o]:c[o]=t[o];var d={type:e,props:c,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--y,__i:-1,__u:0,__source:i,__self:s};if("function"==typeof e&&(r=e.defaultProps))for(o in r)void 0===c[o]&&(c[o]=r[o]);return l.vnode&&l.vnode(d),d}const b=h(null),x=h(!1),k=h(null);var w,N,S;(N=w||(w={})).assertEqual=e=>{},N.assertIs=function(e){},N.assertNever=function(e){throw new Error},N.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},N.getValidEnumValues=e=>{const t=N.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const a of t)n[a]=e[a];return N.objectValues(n)},N.objectValues=e=>N.objectKeys(e).map(function(t){return e[t]}),N.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},N.find=(e,t)=>{for(const n of e)if(t(n))return n},N.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,N.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},N.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(S||(S={})).mergeShapes=(e,t)=>o(o({},e),t);const T=w.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),C=e=>{switch(typeof e){case"undefined":return T.undefined;case"string":return T.string;case"number":return Number.isNaN(e)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(e)?T.array:null===e?T.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?T.promise:"undefined"!=typeof Map&&e instanceof Map?T.map:"undefined"!=typeof Set&&e instanceof Set?T.set:"undefined"!=typeof Date&&e instanceof Date?T.date:T.object;default:return T.unknown}},O=w.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class A extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,a=0;for(;a<i.path.length;){const n=i.path[a];a===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof A))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,w.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const a of this.issues)if(a.path.length>0){const n=a.path[0];t[n]=t[n]||[],t[n].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}A.create=e=>new A(e);const Z=(e,t)=>{let n;switch(e.code){case O.invalid_type:n=e.received===T.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case O.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,w.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:n=`Unrecognized key(s) in object: ${w.joinValues(e.keys,", ")}`;break;case O.invalid_union:n="Invalid input";break;case O.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${w.joinValues(e.options)}`;break;case O.invalid_enum_value:n=`Invalid enum value. Expected ${w.joinValues(e.options)}, received '${e.received}'`;break;case O.invalid_arguments:n="Invalid function arguments";break;case O.invalid_return_type:n="Invalid function return type";break;case O.invalid_date:n="Invalid date";break;case O.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:w.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case O.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case O.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case O.custom:n="Invalid input";break;case O.invalid_intersection_types:n="Intersection results could not be merged";break;case O.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case O.not_finite:n="Number must be finite";break;default:n=t.defaultError,w.assertNever(e)}return{message:n}};let I=Z;function E(e,t){const n=I,a=(e=>{const{data:t,path:n,errorMaps:a,issueData:i}=e,s=[...n,...i.path||[]],r=c(o({},i),{path:s});if(void 0!==i.message)return c(o({},i),{path:s,message:i.message});let l="";const d=a.filter(e=>!!e).slice().reverse();for(const o of d)l=o(r,{data:t,defaultError:l}).message;return c(o({},i),{path:s,message:l})})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Z?void 0:Z].filter(e=>!!e)});e.common.issues.push(a)}class j{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return R;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const e=await a.key,t=await a.value;n.push({key:e,value:t})}return j.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:i}=a;if("aborted"===t.status)return R;if("aborted"===i.status)return R;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!a.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const R=Object.freeze({status:"aborted"}),P=e=>({status:"dirty",value:e}),$=e=>({status:"valid",value:e}),M=e=>"aborted"===e.status,z=e=>"dirty"===e.status,F=e=>"valid"===e.status,D=e=>"undefined"!=typeof Promise&&e instanceof Promise;var L,W;(W=L||(L={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},W.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class V{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const U=(e,t)=>{if(F(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new A(e.common.issues);return this._error=t,this._error}}};function B(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:i}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var s,r;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!=(s=null!=o?o:a)?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!=(r=null!=o?o:n)?r:i.defaultError}},description:i}}class H{get description(){return this._def.description}_getType(e){return C(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:C(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new j,ctx:{common:e.parent.common,data:e.data,parsedType:C(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(D(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:null!=(n=null==t?void 0:t.async)&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:C(e)},i=this._parseSync({data:e,path:a.path,parent:a});return U(a,i)}"~validate"(e){var t,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:C(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:a});return F(t)?{value:t.value}:{issues:a.common.issues}}catch(i){(null==(n=null==(t=null==i?void 0:i.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(e=>F(e)?{value:e.value}:{issues:a.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:C(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(D(a)?a:Promise.resolve(a));return U(n,i)}refine(e,t){return this._refinement((n,a)=>{const i=e(n),s=()=>a.addIssue(o({code:O.custom},(e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t)(n)));return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((n,a)=>!!e(n)||(a.addIssue("function"==typeof t?t(n,a):t),!1))}_refinement(e){return new Ke({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return qe.create(this,this._def)}nullable(){return Ge.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ae.create(this)}promise(){return He.create(this,this._def)}or(e){return Ee.create([this,e],this._def)}and(e){return $e.create(this,e,this._def)}transform(e){return new Ke(c(o({},B(this._def)),{schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"==typeof e?e:()=>e;return new Je(c(o({},B(this._def)),{innerType:this,defaultValue:t,typeName:nt.ZodDefault}))}brand(){return new Qe(o({typeName:nt.ZodBranded,type:this},B(this._def)))}catch(e){const t="function"==typeof e?e:()=>e;return new Xe(c(o({},B(this._def)),{innerType:this,catchValue:t,typeName:nt.ZodCatch}))}describe(e){return new(0,this.constructor)(c(o({},this._def),{description:e}))}pipe(e){return et.create(this,e)}readonly(){return tt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const K=/^c[^\s-]{8,}$/i,q=/^[0-9a-z]+$/,G=/^[0-9A-HJKMNP-TV-Z]{26}$/i,J=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X=/^[a-z0-9_-]{21}$/i,Y=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Q=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let te;const ne=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,se=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,re=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ce="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",le=new RegExp(`^${ce}$`);function de(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function ue(e){return new RegExp(`^${de(e)}$`)}function he(e){let t=`${ce}T${de(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function pe(e,t){return!("v4"!==t&&t||!ne.test(e))||!("v6"!==t&&t||!ie.test(e))}function me(e,t){if(!Y.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(a));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===(null==i?void 0:i.typ))&&(!!i.alg&&(!t||i.alg===t)))}catch(n){return!1}}function ge(e,t){return!("v4"!==t&&t||!ae.test(e))||!("v6"!==t&&t||!se.test(e))}class fe extends H{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==T.string){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.string,received:t.parsedType}),R}const t=new j;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const a=e.data.length>i.value,s=e.data.length<i.value;(a||s)&&(n=this._getOrReturnCtx(e,n),a?E(n,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&E(n,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)ee.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"email",code:O.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)te||(te=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),te.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"emoji",code:O.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)J.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"uuid",code:O.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)X.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"nanoid",code:O.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)K.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cuid",code:O.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)q.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cuid2",code:O.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)G.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"ulid",code:O.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(a){n=this._getOrReturnCtx(e,n),E(n,{validation:"url",code:O.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"regex",code:O.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){he(i).test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){le.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){ue(i).test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:O.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Q.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"duration",code:O.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?pe(e.data,i.version)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"ip",code:O.invalid_string,message:i.message}),t.dirty()):"jwt"===i.kind?me(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"jwt",code:O.invalid_string,message:i.message}),t.dirty()):"cidr"===i.kind?ge(e.data,i.version)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"cidr",code:O.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?re.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"base64",code:O.invalid_string,message:i.message}),t.dirty()):"base64url"===i.kind?oe.test(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{validation:"base64url",code:O.invalid_string,message:i.message}),t.dirty()):w.assertNever(i);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),o({validation:t,code:O.invalid_string},L.errToObj(n)))}_addCheck(e){return new fe(c(o({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(o({kind:"email"},L.errToObj(e)))}url(e){return this._addCheck(o({kind:"url"},L.errToObj(e)))}emoji(e){return this._addCheck(o({kind:"emoji"},L.errToObj(e)))}uuid(e){return this._addCheck(o({kind:"uuid"},L.errToObj(e)))}nanoid(e){return this._addCheck(o({kind:"nanoid"},L.errToObj(e)))}cuid(e){return this._addCheck(o({kind:"cuid"},L.errToObj(e)))}cuid2(e){return this._addCheck(o({kind:"cuid2"},L.errToObj(e)))}ulid(e){return this._addCheck(o({kind:"ulid"},L.errToObj(e)))}base64(e){return this._addCheck(o({kind:"base64"},L.errToObj(e)))}base64url(e){return this._addCheck(o({kind:"base64url"},L.errToObj(e)))}jwt(e){return this._addCheck(o({kind:"jwt"},L.errToObj(e)))}ip(e){return this._addCheck(o({kind:"ip"},L.errToObj(e)))}cidr(e){return this._addCheck(o({kind:"cidr"},L.errToObj(e)))}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(o({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(n=null==e?void 0:e.local)&&n},L.errToObj(null==e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(o({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},L.errToObj(null==e?void 0:e.message)))}duration(e){return this._addCheck(o({kind:"duration"},L.errToObj(e)))}regex(e,t){return this._addCheck(o({kind:"regex",regex:e},L.errToObj(t)))}includes(e,t){return this._addCheck(o({kind:"includes",value:e,position:null==t?void 0:t.position},L.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck(o({kind:"startsWith",value:e},L.errToObj(t)))}endsWith(e,t){return this._addCheck(o({kind:"endsWith",value:e},L.errToObj(t)))}min(e,t){return this._addCheck(o({kind:"min",value:e},L.errToObj(t)))}max(e,t){return this._addCheck(o({kind:"max",value:e},L.errToObj(t)))}length(e,t){return this._addCheck(o({kind:"length",value:e},L.errToObj(t)))}nonempty(e){return this.min(1,L.errToObj(e))}trim(){return new fe(c(o({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new fe(c(o({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new fe(c(o({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ve(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=n>a?n:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}fe.create=e=>{var t;return new fe(o({checks:[],typeName:nt.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t},B(e)))};class ye extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==T.number){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.number,received:t.parsedType}),R}let t;const n=new j;for(const a of this._def.checks)if("int"===a.kind)w.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),E(t,{code:O.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==ve(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),E(t,{code:O.not_finite,message:a.message}),n.dirty()):w.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,L.toString(t))}gt(e,t){return this.setLimit("min",e,!1,L.toString(t))}lte(e,t){return this.setLimit("max",e,!0,L.toString(t))}lt(e,t){return this.setLimit("max",e,!1,L.toString(t))}setLimit(e,t,n,a){return new ye(c(o({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:L.toString(a)}]}))}_addCheck(e){return new ye(c(o({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:L.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:L.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:L.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:L.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:L.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:L.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:L.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:L.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:L.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&w.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ye.create=e=>new ye(o({checks:[],typeName:nt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},B(e)));class _e extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(a){return this._getInvalidInput(e)}if(this._getType(e)!==T.bigint)return this._getInvalidInput(e);let t;const n=new j;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),E(t,{code:O.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):w.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.bigint,received:t.parsedType}),R}gte(e,t){return this.setLimit("min",e,!0,L.toString(t))}gt(e,t){return this.setLimit("min",e,!1,L.toString(t))}lte(e,t){return this.setLimit("max",e,!0,L.toString(t))}lt(e,t){return this.setLimit("max",e,!1,L.toString(t))}setLimit(e,t,n,a){return new _e(c(o({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:L.toString(a)}]}))}_addCheck(e){return new _e(c(o({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:L.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:L.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:L.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:L.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:L.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}_e.create=e=>{var t;return new _e(o({checks:[],typeName:nt.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t},B(e)))};class be extends H{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==T.boolean){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.boolean,received:t.parsedType}),R}return $(e.data)}}be.create=e=>new be(o({typeName:nt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},B(e)));class xe extends H{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==T.date){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.date,received:t.parsedType}),R}if(Number.isNaN(e.data.getTime())){return E(this._getOrReturnCtx(e),{code:O.invalid_date}),R}const t=new j;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:O.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),E(n,{code:O.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):w.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xe(c(o({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:L.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:L.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}xe.create=e=>new xe(o({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:nt.ZodDate},B(e)));class ke extends H{_parse(e){if(this._getType(e)!==T.symbol){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.symbol,received:t.parsedType}),R}return $(e.data)}}ke.create=e=>new ke(o({typeName:nt.ZodSymbol},B(e)));class we extends H{_parse(e){if(this._getType(e)!==T.undefined){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.undefined,received:t.parsedType}),R}return $(e.data)}}we.create=e=>new we(o({typeName:nt.ZodUndefined},B(e)));class Ne extends H{_parse(e){if(this._getType(e)!==T.null){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.null,received:t.parsedType}),R}return $(e.data)}}Ne.create=e=>new Ne(o({typeName:nt.ZodNull},B(e)));class Se extends H{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}}Se.create=e=>new Se(o({typeName:nt.ZodAny},B(e)));class Te extends H{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}}Te.create=e=>new Te(o({typeName:nt.ZodUnknown},B(e)));class Ce extends H{_parse(e){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.never,received:t.parsedType}),R}}Ce.create=e=>new Ce(o({typeName:nt.ZodNever},B(e)));class Oe extends H{_parse(e){if(this._getType(e)!==T.undefined){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.void,received:t.parsedType}),R}return $(e.data)}}Oe.create=e=>new Oe(o({typeName:nt.ZodVoid},B(e)));class Ae extends H{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==T.array)return E(t,{code:O.invalid_type,expected:T.array,received:t.parsedType}),R;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(E(t,{code:e?O.too_big:O.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(E(t,{code:O.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(E(t,{code:O.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>a.type._parseAsync(new V(t,e,t.path,n)))).then(e=>j.mergeArray(n,e));const i=[...t.data].map((e,n)=>a.type._parseSync(new V(t,e,t.path,n)));return j.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ae(c(o({},this._def),{minLength:{value:e,message:L.toString(t)}}))}max(e,t){return new Ae(c(o({},this._def),{maxLength:{value:e,message:L.toString(t)}}))}length(e,t){return new Ae(c(o({},this._def),{exactLength:{value:e,message:L.toString(t)}}))}nonempty(e){return this.min(1,e)}}function Ze(e){if(e instanceof Ie){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=qe.create(Ze(a))}return new Ie(c(o({},e._def),{shape:()=>t}))}return e instanceof Ae?new Ae(c(o({},e._def),{type:Ze(e.element)})):e instanceof qe?qe.create(Ze(e.unwrap())):e instanceof Ge?Ge.create(Ze(e.unwrap())):e instanceof Me?Me.create(e.items.map(e=>Ze(e))):e}Ae.create=(e,t)=>new Ae(o({type:e,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray},B(t)));class Ie extends H{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=w.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==T.object){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.object,received:t.parsedType}),R}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Ce&&"strip"===this._def.unknownKeys))for(const o in n.data)i.includes(o)||s.push(o);const r=[];for(const o of i){const e=a[o],t=n.data[o];r.push({key:{status:"valid",value:o},value:e._parse(new V(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof Ce){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)r.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)s.length>0&&(E(n,{code:O.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const a=n.data[t];r.push({key:{status:"valid",value:t},value:e._parse(new V(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of r){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>j.mergeObjectSync(t,e)):j.mergeObjectSync(t,r)}get shape(){return this._def.shape()}strict(e){return L.errToObj,new Ie(o(c(o({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,n)=>{var a,i,s,r;const o=null!=(s=null==(i=(a=this._def).errorMap)?void 0:i.call(a,t,n).message)?s:n.defaultError;return"unrecognized_keys"===t.code?{message:null!=(r=L.errToObj(e).message)?r:o}:{message:o}}}:{}))}strip(){return new Ie(c(o({},this._def),{unknownKeys:"strip"}))}passthrough(){return new Ie(c(o({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new Ie(c(o({},this._def),{shape:()=>o(o({},this._def.shape()),e)}))}merge(e){return new Ie({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>o(o({},this._def.shape()),e._def.shape()),typeName:nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ie(c(o({},this._def),{catchall:e}))}pick(e){const t={};for(const n of w.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Ie(c(o({},this._def),{shape:()=>t}))}omit(e){const t={};for(const n of w.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Ie(c(o({},this._def),{shape:()=>t}))}deepPartial(){return Ze(this)}partial(e){const t={};for(const n of w.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}return new Ie(c(o({},this._def),{shape:()=>t}))}required(e){const t={};for(const n of w.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof qe;)e=e._def.innerType;t[n]=e}return new Ie(c(o({},this._def),{shape:()=>t}))}keyof(){return Ve(w.objectKeys(this.shape))}}Ie.create=(e,t)=>new Ie(o({shape:()=>e,unknownKeys:"strip",catchall:Ce.create(),typeName:nt.ZodObject},B(t))),Ie.strictCreate=(e,t)=>new Ie(o({shape:()=>e,unknownKeys:"strict",catchall:Ce.create(),typeName:nt.ZodObject},B(t))),Ie.lazycreate=(e,t)=>new Ie(o({shape:e,unknownKeys:"strip",catchall:Ce.create(),typeName:nt.ZodObject},B(t)));class Ee extends H{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n=c(o({},t),{common:c(o({},t.common),{issues:[]}),parent:null});return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const n=e.map(e=>new A(e.ctx.common.issues));return E(t,{code:O.invalid_union,unionErrors:n}),R});{let e;const a=[];for(const s of n){const n=c(o({},t),{common:c(o({},t.common),{issues:[]}),parent:null}),i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=a.map(e=>new A(e));return E(t,{code:O.invalid_union,unionErrors:i}),R}}get options(){return this._def.options}}Ee.create=(e,t)=>new Ee(o({options:e,typeName:nt.ZodUnion},B(t)));const je=e=>e instanceof Le?je(e.schema):e instanceof Ke?je(e.innerType()):e instanceof We?[e.value]:e instanceof Ue?e.options:e instanceof Be?w.objectValues(e.enum):e instanceof Je?je(e._def.innerType):e instanceof we?[void 0]:e instanceof Ne?[null]:e instanceof qe?[void 0,...je(e.unwrap())]:e instanceof Ge?[null,...je(e.unwrap())]:e instanceof Qe||e instanceof tt?je(e.unwrap()):e instanceof Xe?je(e._def.innerType):[];class Re extends H{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.object)return E(t,{code:O.invalid_type,expected:T.object,received:t.parsedType}),R;const n=this.discriminator,a=t.data[n],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(E(t,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),R)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const i of t){const t=je(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(a.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,i)}}return new Re(o({typeName:nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a},B(n)))}}function Pe(e,t){const n=C(e),a=C(t);if(e===t)return{valid:!0,data:e};if(n===T.object&&a===T.object){const n=w.objectKeys(t),a=w.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i=o(o({},e),t);for(const s of a){const n=Pe(e[s],t[s]);if(!n.valid)return{valid:!1};i[s]=n.data}return{valid:!0,data:i}}if(n===T.array&&a===T.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const i=Pe(e[a],t[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===T.date&&a===T.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class $e extends H{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(M(e)||M(a))return R;const i=Pe(e.value,a.value);return i.valid?((z(e)||z(a))&&t.dirty(),{status:t.value,value:i.data}):(E(n,{code:O.invalid_intersection_types}),R)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}$e.create=(e,t,n)=>new $e(o({left:e,right:t,typeName:nt.ZodIntersection},B(n)));class Me extends H{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.array)return E(n,{code:O.invalid_type,expected:T.array,received:n.parsedType}),R;if(n.data.length<this._def.items.length)return E(n,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&n.data.length>this._def.items.length&&(E(n,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new V(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(a).then(e=>j.mergeArray(t,e)):j.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Me(c(o({},this._def),{rest:e}))}}Me.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Me(o({items:e,typeName:nt.ZodTuple,rest:null},B(t)))};class ze extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.object)return E(n,{code:O.invalid_type,expected:T.object,received:n.parsedType}),R;const a=[],i=this._def.keyType,s=this._def.valueType;for(const r in n.data)a.push({key:i._parse(new V(n,r,n.path,r)),value:s._parse(new V(n,n.data[r],n.path,r)),alwaysSet:r in n.data});return n.common.async?j.mergeObjectAsync(t,a):j.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new ze(t instanceof H?o({keyType:e,valueType:t,typeName:nt.ZodRecord},B(n)):o({keyType:fe.create(),valueType:e,typeName:nt.ZodRecord},B(t)))}}class Fe extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.map)return E(n,{code:O.invalid_type,expected:T.map,received:n.parsedType}),R;const a=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([e,t],s)=>({key:a._parse(new V(n,e,n.path,[s,"key"])),value:i._parse(new V(n,t,n.path,[s,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of s){const a=await n.key,i=await n.value;if("aborted"===a.status||"aborted"===i.status)return R;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of s){const a=n.key,i=n.value;if("aborted"===a.status||"aborted"===i.status)return R;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}}Fe.create=(e,t,n)=>new Fe(o({valueType:t,keyType:e,typeName:nt.ZodMap},B(n)));class De extends H{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.set)return E(n,{code:O.invalid_type,expected:T.set,received:n.parsedType}),R;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(E(n,{code:O.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(E(n,{code:O.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const n=new Set;for(const a of e){if("aborted"===a.status)return R;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const r=[...n.data.values()].map((e,t)=>i._parse(new V(n,e,n.path,t)));return n.common.async?Promise.all(r).then(e=>s(e)):s(r)}min(e,t){return new De(c(o({},this._def),{minSize:{value:e,message:L.toString(t)}}))}max(e,t){return new De(c(o({},this._def),{maxSize:{value:e,message:L.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}De.create=(e,t)=>new De(o({valueType:e,minSize:null,maxSize:null,typeName:nt.ZodSet},B(t)));class Le extends H{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Le.create=(e,t)=>new Le(o({getter:e,typeName:nt.ZodLazy},B(t)));class We extends H{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return E(t,{received:t.data,code:O.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Ve(e,t){return new Ue(o({values:e,typeName:nt.ZodEnum},B(t)))}We.create=(e,t)=>new We(o({value:e,typeName:nt.ZodLiteral},B(t)));class Ue extends H{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return E(t,{expected:w.joinValues(n),received:t.parsedType,code:O.invalid_type}),R}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return E(t,{received:t.data,code:O.invalid_enum_value,options:n}),R}return $(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ue.create(e,o(o({},this._def),t))}exclude(e,t=this._def){return Ue.create(this.options.filter(t=>!e.includes(t)),o(o({},this._def),t))}}Ue.create=Ve;class Be extends H{_parse(e){const t=w.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==T.string&&n.parsedType!==T.number){const e=w.objectValues(t);return E(n,{expected:w.joinValues(e),received:n.parsedType,code:O.invalid_type}),R}if(this._cache||(this._cache=new Set(w.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=w.objectValues(t);return E(n,{received:n.data,code:O.invalid_enum_value,options:e}),R}return $(e.data)}get enum(){return this._def.values}}Be.create=(e,t)=>new Be(o({values:e,typeName:nt.ZodNativeEnum},B(t)));class He extends H{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.promise&&!1===t.common.async)return E(t,{code:O.invalid_type,expected:T.promise,received:t.parsedType}),R;const n=t.parsedType===T.promise?t.data:Promise.resolve(t.data);return $(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}He.create=(e,t)=>new He(o({type:e,typeName:nt.ZodPromise},B(t)));class Ke extends H{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{E(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return R;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?R:"dirty"===a.status||"dirty"===t.value?P(a.value):a});{if("aborted"===t.value)return R;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?R:"dirty"===a.status||"dirty"===t.value?P(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?R:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?R:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!F(e))return R;const s=a.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>F(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):R)}w.assertNever(a)}}Ke.create=(e,t,n)=>new Ke(o({schema:e,typeName:nt.ZodEffects,effect:t},B(n))),Ke.createWithPreprocess=(e,t,n)=>new Ke(o({schema:t,effect:{type:"preprocess",transform:e},typeName:nt.ZodEffects},B(n)));class qe extends H{_parse(e){return this._getType(e)===T.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qe.create=(e,t)=>new qe(o({innerType:e,typeName:nt.ZodOptional},B(t)));class Ge extends H{_parse(e){return this._getType(e)===T.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ge.create=(e,t)=>new Ge(o({innerType:e,typeName:nt.ZodNullable},B(t)));class Je extends H{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===T.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Je.create=(e,t)=>new Je(o({innerType:e,typeName:nt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},B(t)));class Xe extends H{_parse(e){const{ctx:t}=this._processInputParams(e),n=c(o({},t),{common:c(o({},t.common),{issues:[]})}),a=this._def.innerType._parse({data:n.data,path:n.path,parent:o({},n)});return D(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new A(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new A(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Xe.create=(e,t)=>new Xe(o({innerType:e,typeName:nt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},B(t)));class Ye extends H{_parse(e){if(this._getType(e)!==T.nan){const t=this._getOrReturnCtx(e);return E(t,{code:O.invalid_type,expected:T.nan,received:t.parsedType}),R}return{status:"valid",value:e.data}}}Ye.create=e=>new Ye(o({typeName:nt.ZodNaN},B(e)));class Qe extends H{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class et extends H{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?R:"dirty"===e.status?(t.dirty(),P(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?R:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new et({in:e,out:t,typeName:nt.ZodPipeline})}}class tt extends H{_parse(e){const t=this._def.innerType._parse(e),n=e=>(F(e)&&(e.value=Object.freeze(e.value)),e);return D(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var nt,at;tt.create=(e,t)=>new tt(o({innerType:e,typeName:nt.ZodReadonly},B(t))),(at=nt||(nt={})).ZodString="ZodString",at.ZodNumber="ZodNumber",at.ZodNaN="ZodNaN",at.ZodBigInt="ZodBigInt",at.ZodBoolean="ZodBoolean",at.ZodDate="ZodDate",at.ZodSymbol="ZodSymbol",at.ZodUndefined="ZodUndefined",at.ZodNull="ZodNull",at.ZodAny="ZodAny",at.ZodUnknown="ZodUnknown",at.ZodNever="ZodNever",at.ZodVoid="ZodVoid",at.ZodArray="ZodArray",at.ZodObject="ZodObject",at.ZodUnion="ZodUnion",at.ZodDiscriminatedUnion="ZodDiscriminatedUnion",at.ZodIntersection="ZodIntersection",at.ZodTuple="ZodTuple",at.ZodRecord="ZodRecord",at.ZodMap="ZodMap",at.ZodSet="ZodSet",at.ZodFunction="ZodFunction",at.ZodLazy="ZodLazy",at.ZodLiteral="ZodLiteral",at.ZodEnum="ZodEnum",at.ZodEffects="ZodEffects",at.ZodNativeEnum="ZodNativeEnum",at.ZodOptional="ZodOptional",at.ZodNullable="ZodNullable",at.ZodDefault="ZodDefault",at.ZodCatch="ZodCatch",at.ZodPromise="ZodPromise",at.ZodBranded="ZodBranded",at.ZodPipeline="ZodPipeline",at.ZodReadonly="ZodReadonly";const it=fe.create,st=ye.create,rt=be.create,ot=Te.create;Ce.create;const ct=Ae.create,lt=Ie.create,dt=Ee.create,ut=Re.create;$e.create,Me.create;const ht=ze.create,pt=We.create,mt=Ue.create;He.create,qe.create,Ge.create;const gt=ut("type",[lt({type:pt("empirbus"),channel:it().regex(/^[a-z][a-z0-9-]*$/,"Channel must be lowercase alphanumeric with hyphens"),property:mt(["state","intensity","value"]).optional()}),lt({type:pt("nmea2000"),pgn:st().int().positive(),field:it().min(1),instance:st().int().nonnegative().optional()}),lt({type:pt("static"),value:ot()})]),ft=lt({id:it().regex(/^[a-zA-Z][a-zA-Z0-9-_]*$/,"ID must start with letter and contain only alphanumeric, hyphens, underscores"),type:it(),label:it().min(1).max(50),icon:it().optional(),tooltip:it().max(200).optional(),disabled:rt().optional(),visible:rt().optional()}),vt=ft.extend({type:pt("toggle"),variant:mt(["default","switch","checkbox","round"]).optional(),bindings:lt({state:gt})}),yt=lt({state:gt.optional(),action:gt.optional()}).refine(e=>void 0!==e.state||void 0!==e.action,"Button must have at least one binding (state or action)"),_t=ft.extend({type:pt("button"),action:mt(["momentary","toggle"]),variant:mt(["primary","secondary","danger","round"]).optional(),bindings:yt}),bt=ft.extend({type:pt("dimmer"),min:st().min(0).max(100).optional().default(0),max:st().min(0).max(100).optional().default(100),step:st().min(1).max(100).optional().default(1),bindings:lt({intensity:gt})});bt.refine(e=>(e.min||0)<(e.max||100),"min must be less than max");const xt=ft.extend({type:pt("gauge"),variant:mt(["circular","linear","numeric"]).optional(),min:st().optional(),max:st().optional(),unit:it().max(20).optional(),decimals:st().int().min(0).max(4).optional().default(0),bindings:lt({value:gt})});xt.refine(e=>void 0===e.min||void 0===e.max||e.min<e.max,"min must be less than max");const kt=ft.extend({type:pt("indicator"),variant:mt(["led","badge","icon"]).optional(),color:mt(["green","yellow","red","blue","white"]).optional(),bindings:lt({state:gt})}),wt=ft.extend({type:pt("slider"),orientation:mt(["horizontal","vertical"]).optional().default("horizontal"),min:st(),max:st(),step:st().positive().optional().default(1),unit:it().max(20).optional(),showValue:rt().optional().default(!0),bindings:lt({value:gt})});wt.refine(e=>e.min<e.max,"min must be less than max");const Nt=dt([vt,_t,bt,xt,kt,wt]),St=lt({id:it().regex(/^[a-zA-Z][a-zA-Z0-9-_]*$/,"ID must start with letter and contain only alphanumeric, hyphens, underscores"),title:it().min(1).max(50),enabled:rt().default(!0),type:mt(["switching","signal-values","image","mixed"]).optional(),icon:it().optional(),collapsible:rt().optional(),collapsed:rt().optional(),imageUrl:it().optional(),components:ct(Nt)}),Tt=mt(["home","lighting","power","hvac","switching","plumbing"]),Ct=lt({id:it().regex(/^[a-zA-Z][a-zA-Z0-9-_]*$/,"ID must start with letter and contain only alphanumeric, hyphens, underscores"),title:it().min(1).max(30),icon:it().optional(),preset:Tt.optional(),enabled:rt().optional().default(!0),sections:ct(St).min(1)}),Ot=lt({id:it().regex(/^[a-zA-Z][a-zA-Z0-9-_]*$/,"ID must start with letter and contain only alphanumeric, hyphens, underscores"),type:mt(["svg","png","jpg"]),data:it().optional(),url:it().url().optional()}).refine(e=>void 0!==e.data||void 0!==e.url,"Icon must have either data or url"),At=mt(["core","core-lite"]),Zt=mt(["not-used","push-button","toggle-button","slider","half-bridge","dimmer","special-function"]),It=mt(["core","core-lite","genesis"]),Et=lt({id:it(),source:It,channel:st().int().positive(),label:it().max(50).optional(),control:Zt.default("not-used"),icon:it().optional(),signalId:st().int().positive().optional(),signals:lt({toggle:st().int().positive().nullable().optional(),momentary:st().int().positive().nullable().optional(),dimmer:st().int().positive().nullable().optional()}).optional(),range:lt({min:st(),max:st(),step:st().positive()}).optional()}),jt=lt({source:It,channelA:st().int().positive(),channelB:st().int().positive(),enabled:rt().default(!1)}),Rt=dt([st().int().positive(),lt({"push-button":st().int().positive().optional(),"toggle-button":st().int().positive().optional(),slider:st().int().positive().optional(),default:st().int().positive().optional()})]),Pt=lt({systemType:At.default("core"),outputs:ct(Et),halfBridgePairs:ct(jt).optional(),signalMap:ht(it(),Rt).optional(),genesisBoards:st().int().min(0).max(4).default(0)}),$t=lt({dcCharging:lt({secondAlternator:rt().default(!1),orionXs:rt().default(!1)}).default({secondAlternator:!1,orionXs:!1}),solar:lt({enabled:rt().default(!1),primaryArray:rt().default(!0),auxiliaryArray:rt().default(!1)}).default({enabled:!1,primaryArray:!0,auxiliaryArray:!1}),batteryManagement:mt(["victron","expion","battleborn","discover"]).default("victron"),acLegs:st().int().min(1).max(2).default(2),multiplus:lt({l1:rt().default(!1),l2:rt().default(!1)}).default({l1:!1,l2:!1})}),Mt=lt({heating:lt({enabled:rt().default(!1),sources:lt({diesel:rt().default(!1),electric:rt().default(!1),engine:rt().default(!1)}).default({diesel:!1,electric:!1,engine:!1}),distribution:lt({floor:rt().default(!1),fans:rt().default(!1)}).default({floor:!1,fans:!1}),hotWater:rt().default(!1),auxZone:rt().default(!1)}).default({enabled:!1,sources:{diesel:!1,electric:!1,engine:!1},distribution:{floor:!1,fans:!1},hotWater:!1,auxZone:!1}),cooling:lt({enabled:rt().default(!1),brand:mt(["","recpro","truma","cruisencomfort"]).default("")}).default({enabled:!1,brand:""}),ventilation:lt({enabled:rt().default(!1),fans:st().int().min(0).max(2).default(1)}).default({enabled:!1,fans:1})}),zt=lt({type:mt(["fresh","waste","black"]),name:it().max(50).default("")}),Ft=lt({enabled:rt().default(!0),monitoringSource:mt(["cerbo-gx","seelevel"]).default("cerbo-gx"),count:st().int().min(1).max(4).default(3),tanks:ct(zt).min(1).max(4).default([{type:"fresh",name:""},{type:"waste",name:""},{type:"black",name:""}])}),Dt=lt({keypad:lt({enabled:rt().default(!1),count:st().int().min(1).max(4).default(1),buttonsPerKeypad:st().int().min(5).max(16).default(8)}).default({enabled:!1,count:1,buttonsPerKeypad:8}),awning:lt({enabled:rt().default(!1),light:rt().default(!1),controlType:mt(["rvc","analog"]).default("rvc")}).default({enabled:!1,light:!1,controlType:"rvc"}),slides:lt({enabled:rt().default(!1),controlType:mt(["rvc","analog"]).default("rvc"),keypadSecured:rt().default(!1)}).default({enabled:!1,controlType:"rvc",keypadSecured:!1}),itcLighting:lt({enabled:rt().default(!1),modules:st().int().min(0).max(4).default(0),zonesPerModule:dt([pt(2),pt(4)]).default(2)}).default({enabled:!1,modules:0,zonesPerModule:2})}),Lt=lt({enabled:rt().default(!1),modules:st().int().min(0).max(4).default(0),zonesPerModule:dt([pt(2),pt(4)]).default(2)}).default({enabled:!1,modules:0,zonesPerModule:2}),Wt=lt({preset:mt(["blue","purple","green","orange","red","dark","light"]).default("blue"),customColors:lt({primary:it().regex(/^#[0-9A-Fa-f]{6}$/).optional(),secondary:it().regex(/^#[0-9A-Fa-f]{6}$/).optional(),accent:it().regex(/^#[0-9A-Fa-f]{6}$/).optional(),background:it().regex(/^#[0-9A-Fa-f]{6}$/).optional(),text:it().regex(/^#[0-9A-Fa-f]{6}$/).optional()}).optional()}).default({preset:"blue"}),Vt=lt({enabled:rt().default(!0),title:it().min(1).max(30).default("Subtab"),icon:it().optional()}),Ut=lt({interior:Vt.default({enabled:!0,title:"Interior",icon:"💡"}),exterior:Vt.default({enabled:!0,title:"Exterior",icon:"🌟"}),rgb:Vt.default({enabled:!1,title:"RGB",icon:"🌈"})}).default({interior:{enabled:!0,title:"Interior",icon:"💡"},exterior:{enabled:!0,title:"Exterior",icon:"🌟"},rgb:{enabled:!1,title:"RGB",icon:"🌈"}}),Bt=lt({heating:Vt.default({enabled:!1,title:"Heating",icon:"🔥"}),cooling:Vt.default({enabled:!1,title:"Cooling",icon:"❄️"}),ventilation:Vt.default({enabled:!1,title:"Ventilation",icon:"💨"})}).default({heating:{enabled:!1,title:"Heating",icon:"🔥"},cooling:{enabled:!1,title:"Cooling",icon:"❄️"},ventilation:{enabled:!1,title:"Ventilation",icon:"💨"}}),Ht=lt({switches:Vt.default({enabled:!0,title:"Switches",icon:"🔌"}),accessories:Vt.default({enabled:!0,title:"Accessories",icon:"⚡"}),customSection:lt({enabled:rt().default(!0),title:it().min(1).max(30).default("Custom Controls")}).default({enabled:!0,title:"Custom Controls"}).optional()}).default({switches:{enabled:!0,title:"Switches",icon:"🔌"},accessories:{enabled:!0,title:"Accessories",icon:"⚡"}}),Kt=lt({switchingSection:lt({enabled:rt().default(!1),title:it().min(1).max(30).default("Plumbing Controls")}).default({enabled:!1,title:"Plumbing Controls"})}).default({switchingSection:{enabled:!1,title:"Plumbing Controls"}}),qt=lt({name:it().min(1).max(100),description:it().max(500).optional(),version:it().regex(/^\d+\.\d+\.\d+$/,"Version must be semantic version (x.y.z)"),author:it().max(100).optional(),createdAt:it().datetime().optional(),updatedAt:it().datetime().optional()}),Gt=lt({schemaVersion:it().regex(/^\d+\.\d+\.\d+$/,"Schema version must be semantic version (x.y.z)"),metadata:qt,theme:Wt.optional(),lightingTab:Ut.optional(),hvacTab:Bt.optional(),switchingTab:Ht.optional(),plumbingTab:Kt.optional(),hardware:Pt.optional(),power:$t.optional(),hvac:Mt.optional(),plumbing:Ft.optional(),accessories:Dt.optional(),lighting:Lt.optional(),tabs:ct(Ct).min(1).max(6),icons:ct(Ot).optional()});function Jt(e,t,n){return{path:e,message:t,code:n}}function Xt(e){const t=[];return t.push(...function(e){const t=[],n=new Set;return e.tabs.forEach((e,a)=>{e.sections.forEach((e,i)=>{e.components.forEach((e,s)=>{n.has(e.id)&&t.push(Jt(["tabs",String(a),"sections",String(i),"components",String(s),"id"],`Duplicate component ID: "${e.id}". All component IDs must be unique across the entire schema.`,"duplicate_component_id")),n.add(e.id)})})}),t}(e)),t.push(...function(e){var t;const n=[],a=new Set((null==(t=e.icons)?void 0:t.map(e=>e.id))||[]);return e.tabs.forEach((e,t)=>{e.icon&&!a.has(e.icon)&&n.push(Jt(["tabs",String(t),"icon"],`Icon reference "${e.icon}" not found in schema.icons`,"invalid_icon_reference")),e.sections.forEach((e,i)=>{e.icon&&!a.has(e.icon)&&n.push(Jt(["tabs",String(t),"sections",String(i),"icon"],`Icon reference "${e.icon}" not found in schema.icons`,"invalid_icon_reference")),e.components.forEach((e,s)=>{e.icon&&!a.has(e.icon)&&n.push(Jt(["tabs",String(t),"sections",String(i),"components",String(s),"icon"],`Icon reference "${e.icon}" not found in schema.icons`,"invalid_icon_reference"))})})}),n}(e)),t.push(...function(e){var t;const n=[],a=new Set;return null==(t=e.icons)||t.forEach((e,t)=>{a.has(e.id)&&n.push(Jt(["icons",String(t),"id"],`Duplicate icon ID: "${e.id}". All icon IDs must be unique.`,"duplicate_icon_id")),a.add(e.id)}),n}(e)),t.push(...function(e){const t=[],n=new Set;return e.tabs.forEach((e,a)=>{n.has(e.id)&&t.push(Jt(["tabs",String(a),"id"],`Duplicate tab ID: "${e.id}". All tab IDs must be unique.`,"duplicate_tab_id")),n.add(e.id)}),t}(e)),t.push(...function(e){const t=[];return e.tabs.forEach((e,n)=>{const a=new Set;e.sections.forEach((i,s)=>{a.has(i.id)&&t.push(Jt(["tabs",String(n),"sections",String(s),"id"],`Duplicate section ID: "${i.id}" in tab "${e.id}". Section IDs must be unique within their tab.`,"duplicate_section_id")),a.add(i.id)})}),t}(e)),t}const Yt=48,Qt=49,en=128,tn=5,nn=0;class an{constructor(e={}){this.ws=null,this.shouldAutoReconnect=!0,this.reconnectTimer=null,this.reconnectAttempt=0,this.messageHandlers=[],this.openHandlers=[],this.closeHandlers=[],this.errorHandlers=[],this.config=o({autoConnect:!0,autoReconnect:!0,debug:!1},e),this.shouldAutoReconnect=!1!==this.config.autoReconnect,this.config.autoConnect&&this.connect()}getWebSocketUrl(){if(this.config.url)return this.config.url;return("https:"===window.location.protocol?"wss://":"ws://")+window.location.host+"/ws"}log(...e){this.config.debug}clearReconnectTimer(){null!==this.reconnectTimer&&(window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}scheduleReconnect(e){if(!this.shouldAutoReconnect)return void this.log("Auto-reconnect disabled; skipping reconnect",{code:e?e.code:null,reason:e?e.reason:null});this.reconnectAttempt=Math.min(this.reconnectAttempt+1,10);const t=Math.min(1e3*Math.pow(2,this.reconnectAttempt-1),3e4);this.log("Scheduling reconnect in "+Math.round(t/1e3)+"s",{code:e?e.code:null,reason:e?e.reason:""}),this.clearReconnectTimer(),this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,this.connect()},t)}connect(){if(this.shouldAutoReconnect=!0,this.clearReconnectTimer(),this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return void this.log("Already connected or connecting");const e=this.getWebSocketUrl();this.log("Connecting to",e);try{this.ws=new WebSocket(e)}catch(t){const e=t;return this.log("WebSocket constructor error:",e.message||e),void this.scheduleReconnect()}this.ws.addEventListener("open",()=>{this.reconnectAttempt=0,this.clearReconnectTimer(),this.log("WebSocket connected"),this.send({messagetype:Qt,messagecmd:1,size:3,data:[0,0,0]});const e=this.openHandlers.slice();for(let n=0;n<e.length;n++){const a=e[n];if(a)try{a()}catch(t){this.log("Error in open handler:",t)}}}),this.ws.addEventListener("message",e=>{try{const n=JSON.parse(e.data);this.log("Received message:",n),n.messagetype===Yt&&n.messagecmd===tn&&this.send({messagetype:en,messagecmd:nn,size:1,data:[0]});const a=this.messageHandlers.slice();for(let e=0;e<a.length;e++){const i=a[e];if(i)try{i(n)}catch(t){this.log("Error in message handler:",t)}}}catch(t){this.log("Failed to parse message:",e.data)}}),this.ws.addEventListener("error",e=>{this.log("WebSocket error:",e);const n=this.errorHandlers.slice();for(let a=0;a<n.length;a++){const e=n[a];if(e)try{e()}catch(t){this.log("Error in error handler:",t)}}}),this.ws.addEventListener("close",e=>{this.log("WebSocket closed",{code:e.code,reason:e.reason,wasClean:e.wasClean});const n=this.closeHandlers.slice();for(let a=0;a<n.length;a++){const e=n[a];if(e)try{e()}catch(t){this.log("Error in close handler:",t)}}this.scheduleReconnect(e)})}disconnect(){if(this.shouldAutoReconnect=!1,this.reconnectAttempt=0,this.clearReconnectTimer(),this.ws)try{this.ws.close(1e3,"client disconnect")}catch(e){this.log("Error closing WebSocket:",e)}}send(e){if(this.ws&&this.ws.readyState===WebSocket.OPEN)try{const t=JSON.stringify(e);this.ws.send(t),this.log("Sent message:",e)}catch(t){this.log("Send error:",t)}else this.log("Cannot send, WebSocket not open")}isConnected(){return null!==this.ws&&this.ws.readyState===WebSocket.OPEN}getState(){if(!this.ws)return"closed";switch(this.ws.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"open";case WebSocket.CLOSING:return"closing";case WebSocket.CLOSED:default:return"closed"}}onMessage(e){this.messageHandlers.push(e);const t=this;return function(){const n=t.messageHandlers.indexOf(e);n>-1&&t.messageHandlers.splice(n,1)}}onOpen(e){this.openHandlers.push(e);const t=this;return function(){const n=t.openHandlers.indexOf(e);n>-1&&t.openHandlers.splice(n,1)}}onClose(e){this.closeHandlers.push(e);const t=this;return function(){const n=t.closeHandlers.indexOf(e);n>-1&&t.closeHandlers.splice(n,1)}}onError(e){this.errorHandlers.push(e);const t=this;return function(){const n=t.errorHandlers.indexOf(e);n>-1&&t.errorHandlers.splice(n,1)}}subscribeToSignals(e){if(!e||0===e.length)return void this.log("No signals to subscribe");const t=[];for(let a=0;a<e.length;a++){const n=e[a];if("number"==typeof n){const e=255&n,a=n>>8&255;t.push(e,a)}}const n={messagetype:96,messagecmd:0,size:t.length,data:t};this.log("Subscribing to "+e.length+" signals"),this.send(n)}static extractSignalId(e){if(!e||e.length<2)return null;const t=e[0],n=e[1];return"number"!=typeof t||"number"!=typeof n?null:t|n<<8}}const sn=new Map;function rn(e){let t=sn.get(e);return t||(t=h(null),sn.set(e,t)),t}function on(e,t){rn(e).value={value:t,lastUpdated:Date.now()}}const cn=h("disconnected");let ln=null;function dn(){return ln}function un(e){const t=dn();if(!t||!t.isConnected())return;const n=function(e){const t=new Set;if(e.hardware&&e.hardware.outputs)for(let a=0;a<e.hardware.outputs.length;a++){const n=e.hardware.outputs[a];n&&("number"==typeof n.signalId&&t.add(n.signalId),n.signals&&("number"==typeof n.signals.toggle&&t.add(n.signals.toggle),"number"==typeof n.signals.momentary&&t.add(n.signals.momentary),"number"==typeof n.signals.dimmer&&t.add(n.signals.dimmer)))}const n=Array.from(t);return n.sort(function(e,t){return e-t}),n}(e);0!==n.length&&t.subscribeToSignals(n)}async function hn(e={}){const{schemaPath:t="/new-hmi-configuration-schema-2.json",schema:n,autoSubscribe:a=!0}=e;x.value=!0,k.value=null,b.value=null;try{let e;if(n)e=n;else{const n=await fetch(t);if(!n.ok)throw new Error("Failed to load schema: "+n.statusText);e=await n.json()}const i=function(e){const t=Gt.safeParse(e);if(!t.success)return{success:!1,errors:t.error.errors.map(e=>({path:e.path.map(String),message:e.message,code:e.code}))};const n=Xt(t.data);return n.length>0?{success:!1,errors:n}:{success:!0,data:t.data}}(e);if(!i.success){const e=i.errors.map(function(e){return e.path.join(".")+": "+e.message}).join("; ");throw new Error("Schema validation failed: "+e)}const s=i.data;b.value=s,a&&s.hardware&&function(e){const t=dn();if(!t)return function(){};const n=t.onOpen(function(){un(e)});t.isConnected()&&un(e)}(s)}catch(i){const e=i instanceof Error?i.message:"Unknown error loading schema";k.value=e}finally{x.value=!1}}function pn(e,t){if(!e)return null;if("empirbus"===e.type){const n=e.channel;if("number"==typeof n)return n;if("string"==typeof n){const e=b.value;if(!e||!e.hardware||!e.hardware.outputs)return null;const a=e.hardware.outputs.find(function(e){return e.id===n});return a?a.signals&&t&&a.signals[t]?a.signals[t]:"number"==typeof a.channel?a.channel:null:null}}return"nmea2000"===e.type||e.type,null}function mn(e){return{lo:255&e,hi:e>>8&255}}function gn(e,t){const{lo:n,hi:a}=mn(e);return{messagetype:17,messagecmd:1,size:3,data:[n,a,t?1:0]}}function fn(e,t,n=0){const{lo:a,hi:i}=mn(e),s=0|Number(n),r=Math.max(0,Math.min(100,Number(t)||0)),o=Math.round(10*r);return{messagetype:17,messagecmd:3,size:5,data:[a,i,s,255&o,o>>8&255]}}function vn(e){const{component:t,value:n,onChange:a}=e;let i=null,s=null;if(t.bindings&&t.bindings.state){const e=t.bindings.state;"static"===e.type?s=e.value:i=pn(e,"toggle")}let r=null;if(t.icon&&b.value&&b.value.icons){const e=b.value.icons.find(function(e){return e.id===t.icon});e&&e.data&&(r=e.data)}const o=null!==i?rn(i):null,c=p(function(){if(o&&o.value){const e=o.value.value;if(e&&"boolean"==typeof e.state)return e.state}return null!==s?s:"boolean"==typeof n&&n}),l=t.variant||"default",u="gcg-toggle";return _("div",{className:"gcg-component-wrapper",children:[_("button",{type:"button",className:[u,u+"--"+l,c.value?u+"--on":u+"--off",t.disabled?u+"--disabled":""].filter(function(e){return e}).join(" "),onClick:function(){const e=c.value;if(null!==i){const e=dn();if(e&&e.isConnected()){const t=gn(i,!0);e.send(t),setTimeout(function(){const t=gn(i,!1);e.send(t)},75)}}a&&a(!e)},disabled:t.disabled,"aria-pressed":c.value,"aria-label":t.label,title:t.tooltip,children:[("default"===l||"switch"===l)&&_(d,{children:[_("div",{className:"gcg-toggle__track",children:_("div",{className:"gcg-toggle__thumb"})}),_("span",{className:"gcg-toggle__label",children:t.label})]}),"round"===l&&_(d,{children:r?_("div",{className:"gcg-toggle__icon",dangerouslySetInnerHTML:{__html:r}}):_("span",{className:"gcg-toggle__text",children:"ON/OFF"})}),"checkbox"===l&&_(d,{children:[_("div",{className:"gcg-toggle__checkbox",children:_("svg",{className:"gcg-toggle__checkmark",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:_("polyline",{points:"20 6 9 17 4 12",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),_("span",{className:"gcg-toggle__label",children:t.label})]})]}),"round"===l&&t.label&&_("div",{className:"gcg-component-label",children:t.label}),t.tooltip&&_("div",{className:"gcg-component-tooltip",children:t.tooltip})]})}function yn(e){const{component:t,onAction:n}=e,[a,i]=m(!1);let s=null;if(t.icon&&b.value&&b.value.icons){const e=b.value.icons.find(function(e){return e.id===t.icon});e&&e.data&&(s=e.data)}let r=null;t.bindings&&t.bindings.action&&(r=pn(t.bindings.action,"momentary"));const o=function(e){if(null!==r){const t=dn();if(t&&t.isConnected()){const n=gn(r,e);t.send(n)}}},c=t.variant||"secondary",l="gcg-button",u=[l,l+"--"+c,a?l+"--pressed":"",t.disabled?l+"--disabled":""].filter(function(e){return e}).join(" ");return _("div",{className:"gcg-component-wrapper",children:[_("div",{className:"gcg-button-container",children:[_("label",{className:"gcg-button-label",children:t.label}),_("button",{type:"button",className:u,disabled:t.disabled,onPointerDown:function(e){e.preventDefault(),a||t.disabled||(i(!0),o(!0),n&&n(!0))},onPointerUp:function(e){e.preventDefault(),a&&(i(!1),o(!1),n&&n(!1))},onPointerCancel:function(){a&&(i(!1),o(!1),n&&n(!1))},onPointerLeave:function(){a&&(i(!1),o(!1),n&&n(!1))},"aria-label":t.label,"aria-pressed":a,title:t.tooltip,children:["round"===c&&_(d,{children:s?_("div",{className:"gcg-button__icon",dangerouslySetInnerHTML:{__html:s}}):_("span",{className:"gcg-button__label",children:"ON/OFF"})}),"round"!==c&&s&&_("div",{className:"gcg-button__icon",dangerouslySetInnerHTML:{__html:s}})]})]}),t.tooltip&&_("div",{className:"gcg-component-tooltip",children:t.tooltip})]})}function _n(e){const{component:t,value:n,onChange:a}=e;let i=null,s=null;t.bindings&&t.bindings.intensity&&(i=pn(t.bindings.intensity,"dimmer"),s=pn(t.bindings.intensity,"toggle"));const r=null!==i?rn(i):null,o=null!==s?rn(s):null,c=g(!1),l=f(null),d=g(n||t.min||0),u=p(function(){if(o&&o.value){const e=o.value.value;if(e&&"boolean"==typeof e.state)return e.state}return!1});v(()=>{if(l.current&&!c.value&&document.activeElement!==l.current&&r&&r.value){const e=r.value.value;e&&"number"==typeof e.value&&(l.current.value=String(e.value),d.value=e.value)}});const h=p(function(){if(r&&r.value){const e=r.value.value;if(e&&"number"==typeof e.value)return e.value}return void 0!==n?n:t.min||0}),m=u.value?"gcg-dimmer__toggle--on":"gcg-dimmer__toggle--off",y=t.min||0,b=t.max||100,x=t.step||1;return _("div",{className:"gcg-component-wrapper",children:[_("div",{className:"gcg-dimmer",children:[_("div",{className:"gcg-dimmer__header",children:[_("label",{className:"gcg-dimmer__label",children:_("span",{className:"gcg-dimmer__label-text",children:t.label})}),_("button",{type:"button",className:"gcg-dimmer__toggle "+m,onClick:function(){if(null!==s){const e=dn();if(e&&e.isConnected()){const t=gn(s,!0);e.send(t),setTimeout(function(){const t=gn(s,!1);e.send(t)},75)}}},disabled:t.disabled,"aria-pressed":u.value,"aria-label":"Toggle "+t.label,children:_("div",{className:"gcg-dimmer__toggle-indicator"})})]}),_("div",{className:"gcg-dimmer__slider-container",children:[_("input",{ref:l,type:"range",className:"gcg-dimmer__slider",min:y,max:b,step:x,defaultValue:h.value,onInput:function(e){const t=e.target,n=parseFloat(t.value);isNaN(n)||(c.value=!0,d.value=n)},onChange:function(e){const n=e.target,s=parseFloat(n.value);isNaN(s)||function(e){const n=t.min||0,s=t.max||100,r=t.step||1,o=Math.round(e/r)*r,c=Math.max(n,Math.min(s,o));if(null!==i){const e=dn();if(e&&e.isConnected()){const t=fn(i,c,0);e.send(t)}}a&&a(c)}(s),c.value=!1},disabled:t.disabled,"aria-label":t.label,"aria-valuemin":y,"aria-valuemax":b,"aria-valuenow":d.value}),_("div",{className:"gcg-dimmer__track",children:_("div",{className:"gcg-dimmer__fill",style:{width:(d.value-y)/(b-y)*100+"%"}})})]})]}),t.tooltip&&_("div",{className:"gcg-component-tooltip",children:t.tooltip})]})}function bn(e){const{component:t,value:n}=e,a=t.bindings&&t.bindings.state,i=a&&"static"===a.type;let s=null;a&&"empirbus"===a.type&&(s=pn(a));const r=null!==s?rn(s):null;let o="off";p(function(){if(i&&"static"===a.type)return!0===a.value;if(r&&r.value){const e=r.value.value;if(e&&"boolean"==typeof e.state)return e.state}return!0===n}).value?o="on":"warning"===n?o="warning":"error"===n&&(o="error");const c="gcg-indicator";return _("div",{className:"gcg-component-wrapper",children:[_("div",{className:[c,c+"--"+(t.variant||"led"),c+"--"+o].filter(function(e){return e}).join(" "),role:"status","aria-label":t.label,children:[_("div",{className:"gcg-indicator__light"}),_("span",{className:"gcg-indicator__label",children:t.label})]}),t.tooltip&&_("div",{className:"gcg-component-tooltip",children:t.tooltip})]})}function xn(e){const{component:t,value:n}=e;let a=null;t.bindings&&t.bindings.value&&(a=pn(t.bindings.value));const i=null!==a?rn(a):null,s=p(function(){if(i&&i.value){const e=i.value.value;if(e&&"number"==typeof e.raw)return e.raw}return void 0!==n?n:0}),r=t.variant||"numeric",o=void 0!==t.min?t.min:0,c=void 0!==t.max?t.max:100,l=t.unit||"",d=void 0!==t.decimals?t.decimals:0,u=d>0?s.value.toFixed(d):Math.round(s.value).toString(),h=Math.max(0,Math.min(100,(s.value-o)/(c-o)*100)),m="gcg-gauge";return _("div",{className:"gcg-component-wrapper",children:[_("div",{className:[m,m+"--"+r].join(" "),role:"meter","aria-valuemin":o,"aria-valuemax":c,"aria-valuenow":s.value,children:["circular"===r&&_("div",{className:"gcg-gauge__circular",children:[_("svg",{className:"gcg-gauge__svg",viewBox:"0 0 100 100",children:[_("path",{className:"gcg-gauge__track",d:"M 10,50 A 40,40 0 1,1 90,50",fill:"none",strokeWidth:"8",strokeLinecap:"round"}),_("path",{className:"gcg-gauge__fill",d:"M 10,50 A 40,40 0 1,1 90,50",fill:"none",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:String(2.51*h)+" 251"})]}),_("div",{className:"gcg-gauge__value-container",children:[_("span",{className:"gcg-gauge__value",children:u}),l&&_("span",{className:"gcg-gauge__unit",children:l})]}),_("label",{className:"gcg-gauge__label",children:t.label})]}),"linear"===r&&_("div",{className:"gcg-gauge__linear",children:[_("label",{className:"gcg-gauge__label",children:t.label}),_("div",{className:"gcg-gauge__track-container",children:[_("div",{className:"gcg-gauge__track",children:_("div",{className:"gcg-gauge__fill",style:{width:h+"%"}})}),_("div",{className:"gcg-gauge__value-container",children:[_("span",{className:"gcg-gauge__value",children:u}),l&&_("span",{className:"gcg-gauge__unit",children:l})]})]})]}),"numeric"===r&&_("div",{className:"gcg-gauge__numeric",children:[_("label",{className:"gcg-gauge__label",children:t.label}),_("div",{className:"gcg-gauge__value-container",children:[_("span",{className:"gcg-gauge__value",children:u}),l&&_("span",{className:"gcg-gauge__unit",children:l})]})]})]}),t.tooltip&&_("div",{className:"gcg-component-tooltip",children:t.tooltip})]})}function kn(e){const{component:t,value:n,onChange:a}=e,i=g(!1),s=f(null),r=g(n||t.min);let o=null;t.bindings&&t.bindings.value&&(o=pn(t.bindings.value,"dimmer"));const c=null!==o?rn(o):null;v(()=>{if(s.current&&!i.value&&document.activeElement!==s.current&&c&&c.value){const e=c.value.value;if(e&&"number"==typeof e.value){const n=e.value/100*(t.max-t.min)+t.min;s.current.value=String(n),r.value=n}}});const l=p(()=>{if(c&&c.value){const e=c.value.value;if(e&&"number"==typeof e.value)return e.value/100*(t.max-t.min)+t.min}return r.value}),d=e=>{const n=dn();if(!n||null===o)return;const i=Math.max(t.min,Math.min(t.max,e)),s=Math.round(i/t.step)*t.step,r=(s-t.min)/(t.max-t.min)*100,c=fn(o,r);n.send(c),a&&a(s)},u=()=>{i.value=!0},h=()=>{i.value&&(d(r.value),i.value=!1)},m=(l.value-t.min)/(t.max-t.min)*100,y=null===o,b="vertical"===t.orientation;return _("div",{style:{display:"flex",flexDirection:b?"row":"column",alignItems:"center",gap:"0.5rem",padding:"1rem",background:"var(--component-background)",borderRadius:"12px",border:"1px solid var(--component-border)",minWidth:b?"120px":"200px",minHeight:b?"200px":"80px",opacity:y?.5:1},children:[_("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--text-primary)",textAlign:"center",order:b?2:1},children:t.label}),_("div",{style:{position:"relative",flex:1,display:"flex",alignItems:"center",justifyContent:"center",order:b?1:2,width:b?"60px":"100%",height:b?"100%":"40px"},children:[_("input",{ref:s,type:"range",min:t.min,max:t.max,step:t.step,value:r.value,disabled:y,onInput:e=>{const t=e.target,n=parseFloat(t.value);r.value=n,i.value||d(n)},onMouseDown:u,onMouseUp:h,onTouchStart:u,onTouchEnd:h,style:{appearance:"none",background:"transparent",cursor:y?"not-allowed":"pointer",width:b?"40px":"100%",height:b?"100%":"40px",transform:b?"rotate(-90deg)":"none",transformOrigin:"center"},className:"gcg-slider"}),_("div",{style:{position:"absolute",background:"var(--slider-track-bg, rgba(255, 255, 255, 0.2))",borderRadius:"20px",width:b?"8px":"100%",height:b?"100%":"8px",pointerEvents:"none",zIndex:1}}),_("div",{style:{position:"absolute",background:"var(--theme-accent, #3b82f6)",borderRadius:"20px",width:b?"8px":`${m}%`,height:b?`${m}%`:"8px",[b?"bottom":"left"]:"0",pointerEvents:"none",zIndex:2,transition:i.value?"none":"all 0.2s ease"}})]}),t.showValue&&_("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontFamily:"monospace",minWidth:"60px",textAlign:"center",order:3},children:(e=>{const n=Math.max(0,Math.ceil(Math.log10(1/t.step))),a=e.toFixed(n);return t.unit?`${a} ${t.unit}`:a})(l.value)}),!1]})}function wn(e){const{component:t}=e;switch(t.type){case"toggle":return _(vn,{component:t});case"button":return _(yn,{component:t});case"dimmer":return _(_n,{component:t});case"gauge":return _(xn,{component:t});case"indicator":return _(bn,{component:t});case"slider":return _(kn,{component:t});default:return _("div",{style:{padding:"1rem",background:"rgba(255, 0, 0, 0.1)"},children:["Unknown component type: ",t.type]})}}function Nn(e){const{section:t,hideTitle:n}=e;return _("div",{className:"gcg-section",children:[!n&&_("h2",{className:"gcg-section__title",children:t.title}),_("div",{className:"gcg-section__grid",children:t.components.map(function(e){return _(wn,{component:e},e.id)})})]})}function Sn(e){const{sections:t}=e,n=t.filter(function(e){return!1!==e.enabled}),a=n.length;return _("div",0===a?{className:"gcg-home-layout gcg-home-layout--empty",children:_("p",{children:"No sections configured"})}:1===a?{className:"gcg-home-layout gcg-home-layout--single",children:_(Nn,{section:n[0]})}:{className:"gcg-home-layout gcg-home-layout--dual",children:[_("div",{className:"gcg-home-layout__section",children:_(Nn,{section:n[0]})}),_("div",{className:"gcg-home-layout__section",children:_(Nn,{section:n[1]})})]})}function Tn(e){const{leftInfo:t,centerInfo:n,rightInfo:a}=e;return _("div",{className:"gcg-status-bar",children:[_("div",{className:"gcg-status-bar__content",children:[_("div",{className:"gcg-status-bar__section gcg-status-bar__section--left",children:t||"INTERIOR: --"}),_("div",{className:"gcg-status-bar__section gcg-status-bar__section--center",children:n||"EXTERIOR: --"}),_("div",{className:"gcg-status-bar__section gcg-status-bar__section--right",children:a||"TIME TO GO: --"})]}),_("div",{className:"gcg-status-bar__divider"})]})}function Cn(e){const{tabs:t,activeTabId:n,onTabChange:a}=e;return _("nav",{className:"gcg-tab-bar",children:t.filter(function(e){return!1!==e.enabled}).map(function(e){const t=e.id===n;return _("button",{type:"button",className:t?"gcg-tab-bar__item gcg-tab-bar__item--active":"gcg-tab-bar__item",onClick:function(){a(e.id)},"aria-label":e.title,"aria-current":t?"page":void 0,children:[e.icon&&_("div",{className:"gcg-tab-bar__icon","aria-hidden":"true",children:_("span",{style:{fontSize:"1.5rem"},children:["home"===e.preset&&"🏠","lighting"===e.preset&&"💡","power"===e.preset&&"⚡","hvac"===e.preset&&"❄️","switching"===e.preset&&"🔀","plumbing"===e.preset&&"💧",!e.preset&&"📄"]})}),_("span",{className:"gcg-tab-bar__label",children:e.title})]},e.id)})})}function On(e){const{subtabs:t,activeSubtabId:n,onSubtabChange:a}=e,i=t.filter(function(e){return!1!==e.enabled});return i.length<=1?null:_("nav",{className:"gcg-subtab-bar",children:i.map(function(e){const t=e.id===n;return _("button",{type:"button",className:t?"gcg-subtab-bar__item gcg-subtab-bar__item--active":"gcg-subtab-bar__item",onClick:function(){a(e.id)},"aria-label":e.title,"aria-current":t?"page":void 0,children:[e.icon&&_("span",{className:"gcg-subtab-bar__icon","aria-hidden":"true",children:e.icon}),_("span",{className:"gcg-subtab-bar__title",children:e.title})]},e.id)})})}const An=()=>{const e=g(null),t=g({"tab-lighting":"interior","tab-hvac":"heating","tab-switching":"switches"});v(function(){hn()},[]);const n=b.value,a=x.value,i=k.value;return v(function(){if(n&&n.theme){const e=n.theme,t=document.documentElement;e.customColors&&(e.customColors.primary&&t.style.setProperty("--theme-primary",e.customColors.primary),e.customColors.secondary&&t.style.setProperty("--theme-secondary",e.customColors.secondary),e.customColors.accent&&t.style.setProperty("--theme-accent",e.customColors.accent),e.customColors.background&&t.style.setProperty("--theme-background",e.customColors.background),e.customColors.text&&t.style.setProperty("--theme-text",e.customColors.text))}},[n]),v(function(){if(n&&n.tabs&&n.tabs.length>0&&!e.value){const t=n.tabs.find(function(e){return!1!==e.enabled});t&&(e.value=t.id)}},[n]),_("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"2rem",textAlign:"center"},children:[a&&_("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"2rem",maxWidth:"500px"},children:[_("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"⏳"}),_("h2",{style:{fontSize:"1.5rem",marginBottom:"0.5rem",color:"#e2e8f0"},children:"Loading Schema..."}),_("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:"Fetching and validating configuration"})]}),i&&!a&&_("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"2rem",maxWidth:"500px"},children:[_("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"❌"}),_("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem",color:"#fca5a5"},children:"Schema Load Error"}),_("p",{style:{color:"#fca5a5",fontSize:"0.875rem",fontFamily:"monospace",background:"rgba(0, 0, 0, 0.3)",padding:"1rem",borderRadius:"4px",wordBreak:"break-word"},children:i}),_("button",{onClick:function(){hn()},style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"Retry"})]}),n&&!a&&!i&&_("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column"},children:[_(Tn,{leftInfo:"INTERIOR: 72°F",centerInfo:"EXTERIOR: 65°F",rightInfo:"TIME TO GO: 3:42"}),function(){const a=n.tabs.find(function(t){return t.id===e.value});if(!a)return null;const i=a.id,s="lighting"===a.preset||"tab-lighting"===a.id,r="hvac"===a.preset||"tab-hvac"===a.id,o="switching"===a.preset||"tab-switching"===a.id;let c=[];if(s&&n.lightingTab){const e=n.lightingTab;c=[{id:"interior",title:e.interior.title,icon:e.interior.icon,enabled:e.interior.enabled},{id:"exterior",title:e.exterior.title,icon:e.exterior.icon,enabled:e.exterior.enabled},{id:"rgb",title:e.rgb.title,icon:e.rgb.icon,enabled:e.rgb.enabled}]}if(r&&n.hvacTab){const e=n.hvacTab;c=[{id:"heating",title:e.heating.title,icon:e.heating.icon,enabled:e.heating.enabled},{id:"cooling",title:e.cooling.title,icon:e.cooling.icon,enabled:e.cooling.enabled},{id:"ventilation",title:e.ventilation.title,icon:e.ventilation.icon,enabled:e.ventilation.enabled}]}if(o&&n.switchingTab){const e=n.switchingTab;c=[{id:"switches",title:e.switches.title,icon:e.switches.icon,enabled:e.switches.enabled},{id:"accessories",title:e.accessories.title,icon:e.accessories.icon,enabled:e.accessories.enabled}]}if(0===c.length)return null;const l=t.value[i]||c[0]&&c[0].id;return l?_(On,{subtabs:c,activeSubtabId:l,onSubtabChange:function(e){const n=Object.assign({},t.value);n[i]=e,t.value=n}}):null}(),_("div",{className:"gcg-main-content",style:{flex:1,overflow:"hidden",padding:"1rem"},children:function(){const a=n.tabs.find(function(t){return t.id===e.value});if(!a)return null;if("home"===a.preset||"tab-home"===a.id)return _(Sn,{sections:a.sections});const i="lighting"===a.preset||"tab-lighting"===a.id,s="hvac"===a.preset||"tab-hvac"===a.id,r="switching"===a.preset||"tab-switching"===a.id;if(i||s||r){const e=t.value[a.id];if(!e)return null;let n={};i?n={interior:"section-lighting-interior",exterior:"section-lighting-exterior",rgb:"section-lighting-rgb"}:s?n={heating:"section-hvac-heating",cooling:"section-hvac-cooling",ventilation:"section-hvac-ventilation"}:r&&(n={switches:"section-switching-switches",accessories:"section-switching-accessories"});const o=n[e],c=a.sections.find(function(e){return e.id===o&&!1!==e.enabled});return c?_(Nn,{section:c,hideTitle:!0},c.id):_("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No content available for this section"})}return _("div",{children:a.sections.filter(function(e){return!1!==e.enabled}).map(function(e){return _(Nn,{section:e},e.id)})})}()}),_(Cn,{tabs:n.tabs,activeTabId:e.value||"",onTabChange:function(t){e.value=t}})]})]})};!function(e=!1){if(ln)return;ln=new an({autoConnect:!0,autoReconnect:!0,debug:e}),ln.onOpen(function(){cn.value="connected"}),ln.onClose(function(){cn.value="disconnected"}),ln.onError(function(){cn.value="disconnected"}),ln.onMessage(function(e){!function(e){if(16!==e.messagetype)return;if(!e.data||e.data.length<2)return;const t=e.data[0],n=e.data[1];if("number"!=typeof t||"number"!=typeof n)return;const a=t|n<<8;switch(e.messagecmd){case 1:e.data.length>=3&&on(a,{state:1===e.data[2],lastUpdated:Date.now()});break;case 3:if(e.data.length>=5){const t=e.data[2]||0,n=e.data[3],i=e.data[4];if("number"==typeof n&&"number"==typeof i){const e=n|i<<8,s=e>100?e/10:e;on(a,{index:t,value:Math.max(0,Math.min(100,s)),lastUpdated:Date.now()})}}break;case 5:{let t;if(e.data.length>=8){const n=e.data[4],a=e.data[5];if("number"!=typeof n||"number"!=typeof a)break;t=(n|a<<8)>>>0}else{if(!(e.data.length>=4))break;{const n=e.data[2],a=e.data[3];if("number"!=typeof n||"number"!=typeof a)break;t=(n|a<<8)>>>0}}on(a,{raw:t,lastUpdated:Date.now()});break}default:on(a,{raw:e.data,lastUpdated:Date.now()})}}(e)});const t=ln.getState();cn.value="open"===t?"connected":"connecting"===t?"connecting":"disconnected"}("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);const Zn=document.getElementById("root");if(!Zn)throw new Error("Root element not found");u(_(An,{}),Zn);
